<!DOCTYPE html>
<html>
<head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
        rel="stylesheet"
        as="style"
        onload="this.rel='stylesheet'"
        href="https://fonts.googleapis.com/css2?display=swap&family=Inter%3Awght%40400%3B500%3B700%3B900&family=Noto+Sans%3Awght%40400%3B500%3B700%3B900"
    />
    <title>Login - AlgExpress</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
</head>
<body>
<div class="relative flex size-full min-h-screen flex-col bg-gradient-to-br from-orange-50 to-red-50 group/design-root overflow-x-hidden" style='font-family: Inter, "Noto Sans", sans-serif;'>
    
    <!-- Header -->
    <header class="flex items-center justify-between whitespace-nowrap bg-white shadow-sm px-10 py-4">
        <div class="flex items-center gap-4 text-[#d2440e]">
            <div class="size-8">
                <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M24 4H42V17.3333V30.6667H24V44H6V30.6667V17.3333H24V4Z" fill="currentColor"></path>
                </svg>
            </div>
            <h1 class="text-[#d2440e] text-2xl font-bold leading-tight tracking-[-0.015em]">AlgExpress</h1>
        </div>
        <div class="flex gap-4">
            <a href="customer_signup.html" class="text-[#d2440e] text-sm font-medium hover:text-red-600">Criar conta</a>
            <a href="public_menu.html" class="bg-[#d2440e] text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-red-600">Ver Cardápio</a>
        </div>
    </header>

    <!-- Main Content -->
    <div class="flex-1 flex items-center justify-center p-8">
        <div class="w-full max-w-md">
            
            <!-- Login Card -->
            <div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
                <div class="text-center mb-6">
                    <div class="w-16 h-16 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="white" viewBox="0 0 256 256">
                            <path d="M230.92,212c-15.23-26.33-38.7-45.21-66.09-54.16a72,72,0,1,0-73.66,0C63.78,166.78,40.31,185.66,25.08,212a8,8,0,1,0,13.85,8c18.84-32.56,52.14-52,89.07-52s70.23,19.44,89.07,52a8,8,0,1,0,13.85-8ZM72,96a56,56,0,1,1,56,56A56.06,56.06,0,0,1,72,96Z"></path>
                        </svg>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">Entrar na sua conta</h2>
                    <p class="text-gray-600">Acesse sua conta e faça seus pedidos favoritos!</p>
                </div>

                <!-- Login Form -->
                <form id="loginForm" onsubmit="handleLogin(event)">
                    
                    <!-- Email -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input
                            type="email"
                            id="email"
                            required
                            placeholder="seu@email.com"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"
                        />
                    </div>

                    <!-- Password -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Senha</label>
                        <div class="relative">
                            <input
                                type="password"
                                id="password"
                                required
                                placeholder="Sua senha"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all pr-12"
                            />
                            <button type="button" onclick="togglePassword()" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700">
                                <svg id="eyeIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256">
                                    <path d="M247.31,124.76c-.35-.79-8.82-19.58-27.65-38.41C194.57,61.26,162.88,48,128,48S61.43,61.26,36.34,86.35C17.51,105.18,9,124,8.69,124.76a8,8,0,0,0,0,6.5c.35.79,8.82,19.57,27.65,38.4C61.43,194.74,93.12,208,128,208s66.57-13.26,91.66-38.34c18.83-18.83,27.3-37.61,27.65-38.4A8,8,0,0,0,247.31,124.76ZM128,192c-30.78,0-57.67-11.19-79.93-33.25A133.47,133.47,0,0,1,25,128,133.33,133.33,0,0,1,48.07,97.25C70.33,75.19,97.22,64,128,64s57.67,11.19,79.93,33.25A133.46,133.46,0,0,1,231.05,128C223.84,141.46,192.43,192,128,192Zm0-112a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Z"></path>
                                </svg>
                            </button>
                        </div>
                        <div class="text-right mt-2">
                            <a href="#" class="text-sm text-orange-600 hover:text-orange-700">Esqueci minha senha</a>
                        </div>
                    </div>

                    <!-- Remember Me -->
                    <div class="mb-6">
                        <label class="flex items-center">
                            <input type="checkbox" id="rememberMe" class="w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500">
                            <span class="ml-2 text-sm text-gray-600">Lembrar de mim</span>
                        </label>
                    </div>

                    <!-- Submit Button -->
                    <button
                        type="submit"
                        class="w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-3 px-6 rounded-lg font-semibold hover:from-orange-600 hover:to-red-600 transition-all transform hover:scale-105 shadow-lg"
                        id="loginBtn"
                    >
                        Entrar
                    </button>

                </form>

                <!-- Divider -->
                <div class="flex items-center my-6">
                    <div class="flex-1 border-t border-gray-300"></div>
                    <span class="px-4 text-sm text-gray-500">ou</span>
                    <div class="flex-1 border-t border-gray-300"></div>
                </div>

                <!-- Social Login -->
                <div class="space-y-3">
                    <button class="w-full flex items-center justify-center gap-3 bg-white border border-gray-300 py-3 px-6 rounded-lg hover:bg-gray-50 transition-all">
                        <svg width="20" height="20" viewBox="0 0 24 24">
                            <path fill="#4285f4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                            <path fill="#34a853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                            <path fill="#fbbc05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                            <path fill="#ea4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                        </svg>
                        Entrar com Google
                    </button>

                    <button class="w-full flex items-center justify-center gap-3 bg-[#1877f2] text-white py-3 px-6 rounded-lg hover:bg-[#166fe5] transition-all">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                        </svg>
                        Entrar com Facebook
                    </button>
                </div>

                <!-- Signup Link -->
                <div class="text-center mt-6">
                    <p class="text-sm text-gray-600">
                        Não tem uma conta? 
                        <a href="customer_signup.html" class="text-orange-600 hover:text-orange-700 font-medium">Cadastre-se aqui</a>
                    </p>
                </div>
            </div>

            <!-- Quick Login Demo -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4 text-center">Acesso Rápido (Demo)</h3>
                <p class="text-sm text-gray-600 mb-4 text-center">Use estes dados para testar o sistema:</p>
                <div class="space-y-2">
                    <button onclick="quickLogin('joao@email.com', '123456')" class="w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-4 rounded-lg text-sm transition-all">
                        <div class="flex justify-between">
                            <span>João Silva</span>
                            <span class="text-xs text-gray-500">joao@email.com</span>
                        </div>
                    </button>
                    <button onclick="quickLogin('maria@email.com', '123456')" class="w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-4 rounded-lg text-sm transition-all">
                        <div class="flex justify-between">
                            <span>Maria Oliveira</span>
                            <span class="text-xs text-gray-500">maria@email.com</span>
                        </div>
                    </button>
                </div>
            </div>

        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-white border-t py-6">
        <div class="max-w-4xl mx-auto px-8 text-center">
            <p class="text-sm text-gray-600">
                © 2024 AlgExpress. Todos os direitos reservados. 
                <span class="mx-2">•</span>
                <a href="#" class="text-orange-600 hover:text-orange-700">Termos</a>
                <span class="mx-2">•</span>
                <a href="#" class="text-orange-600 hover:text-orange-700">Privacidade</a>
                <span class="mx-2">•</span>
                <a href="#" class="text-orange-600 hover:text-orange-700">Contato</a>
            </p>
        </div>
    </footer>

</div>

<script>
const API_BASE = 'http://localhost:8080/api/v1';

// Toggle password visibility
function togglePassword() {
    const passwordInput = document.getElementById('password');
    const eyeIcon = document.getElementById('eyeIcon');
    
    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        eyeIcon.innerHTML = '<path d="M53.92,34.62A8,8,0,1,1,42.08,45.38L61.32,66.55C25,88.84,9.38,123.2,8.69,124.76a8,8,0,0,0,0,6.5c.35.79,8.82,19.57,27.65,38.4C61.43,194.74,93.12,208,128,208a127.11,127.11,0,0,0,52.07-10.83l22,24.21a8,8,0,1,0,11.84-10.76Zm47.33,75.84-41.67-45.85a32,32,0,0,1,41.67,45.85ZM128,192c-30.78,0-57.67-11.19-79.93-33.25A133.16,133.16,0,0,1,25,128c4.69-8.79,19.66-33.39,47.35-49.38l18,19.75a48,48,0,0,0,63.66,70l14.73,16.2A112,112,0,0,1,128,192Zm6-95.43a8,8,0,0,1,3-15.72,48.16,48.16,0,0,1,38.77,42.64,8,8,0,0,1-7.22,8.71,6.39,6.39,0,0,1-.75,0,8,8,0,0,1-8-7.26A32.09,32.09,0,0,0,134,96.57Zm113.28,34.69c-.42.94-10.55,23.37-33.36,43.8a8,8,0,1,1-10.67-11.92A132.77,132.77,0,0,0,231.05,128a133.15,133.15,0,0,0-23.12-30.77C185.67,75.19,158.78,64,128,64a118.37,118.37,0,0,0-19.36,1.57A8,8,0,1,1,106,49.79,134,134,0,0,1,128,48c34.88,0,66.57,13.26,91.66,38.35,18.83,18.82,27.3,37.6,27.65,38.39A8,8,0,0,1,247.31,131.26Z"></path>';
    } else {
        passwordInput.type = 'password';
        eyeIcon.innerHTML = '<path d="M247.31,124.76c-.35-.79-8.82-19.58-27.65-38.41C194.57,61.26,162.88,48,128,48S61.43,61.26,36.34,86.35C17.51,105.18,9,124,8.69,124.76a8,8,0,0,0,0,6.5c.35.79,8.82,19.57,27.65,38.4C61.43,194.74,93.12,208,128,208s66.57-13.26,91.66-38.34c18.83-18.83,27.3-37.61,27.65-38.4A8,8,0,0,0,247.31,124.76ZM128,192c-30.78,0-57.67-11.19-79.93-33.25A133.47,133.47,0,0,1,25,128,133.33,133.33,0,0,1,48.07,97.25C70.33,75.19,97.22,64,128,64s57.67,11.19,79.93,33.25A133.46,133.46,0,0,1,231.05,128C223.84,141.46,192.43,192,128,192Zm0-112a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Z"></path>';
    }
}

// Quick login for demo
function quickLogin(email, password) {
    document.getElementById('email').value = email;
    document.getElementById('password').value = password;
    document.getElementById('loginForm').dispatchEvent(new Event('submit'));
}

// Handle login form submission
async function handleLogin(event) {
    event.preventDefault();
    
    const loginBtn = document.getElementById('loginBtn');
    const originalText = loginBtn.textContent;
    
    // Disable button and show loading
    loginBtn.disabled = true;
    loginBtn.textContent = 'Entrando...';
    loginBtn.classList.add('opacity-50');
    
    // Get form data
    const formData = {
        email: document.getElementById('email').value.trim(),
        password: document.getElementById('password').value
    };
    
    try {
        // API Call: POST /api/v1/auth/customer/login
        console.log(`API Call: POST ${API_BASE}/auth/customer/login`);
        console.log('Login data:', { email: formData.email });
        
        // Simulate API call
        await new Promise(resolve => setTimeout(resolve, 1500));
        
        // Check credentials (demo logic)
        const users = {
            'joao@email.com': {
                id: 1,
                name: 'João Silva Santos',
                email: 'joao@email.com',
                phone: '(11) 99999-9999',
                cpf: '123.456.789-00'
            },
            'maria@email.com': {
                id: 2,
                name: 'Maria Oliveira',
                email: 'maria@email.com',
                phone: '(11) 88888-8888',
                cpf: '987.654.321-00'
            }
        };
        
        const user = users[formData.email];
        if (!user || formData.password !== '123456') {
            throw new Error('INVALID_CREDENTIALS');
        }
        
        // Save user data
        localStorage.setItem('algexpress_user', JSON.stringify(user));
        
        // Success
        showSuccessMessage();
        setTimeout(() => {
            window.location.href = 'customer_account.html';
        }, 1500);
        
    } catch (error) {
        console.error('Login error:', error);
        
        if (error.message === 'INVALID_CREDENTIALS') {
            alert('Email ou senha incorretos. Use joao@email.com ou maria@email.com com senha 123456 para testar.');
        } else {
            alert('Erro ao fazer login. Tente novamente em alguns instantes.');
        }
    } finally {
        resetButton();
    }
    
    function resetButton() {
        loginBtn.disabled = false;
        loginBtn.textContent = originalText;
        loginBtn.classList.remove('opacity-50');
    }
}

function showSuccessMessage() {
    // Replace form with success message
    const formContainer = document.querySelector('.bg-white.rounded-2xl');
    formContainer.innerHTML = `
        <div class="text-center py-8">
            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="#10b981" viewBox="0 0 256 256">
                    <path d="M176.49,95.51a12,12,0,0,1,0,17l-56,56a12,12,0,0,1-17,0l-24-24a12,12,0,1,1,17-17L112,143l47.51-47.52A12,12,0,0,1,176.49,95.51Z"></path>
                </svg>
            </div>
            <h2 class="text-2xl font-bold text-gray-900 mb-4">Login realizado com sucesso!</h2>
            <p class="text-gray-600 mb-6">Redirecionando para sua conta...</p>
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"></div>
        </div>
    `;
}

// Check if already logged in
window.onload = function() {
    const user = JSON.parse(localStorage.getItem('algexpress_user') || 'null');
    if (user) {
        window.location.href = 'customer_account.html';
    }
    
    // Focus on email input
    document.getElementById('email').focus();
};
</script>

</body>
</html>