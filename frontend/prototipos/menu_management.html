<!DOCTYPE html>
<html>
<head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
        rel="stylesheet"
        as="style"
        onload="this.rel='stylesheet'"
        href="https://fonts.googleapis.com/css2?display=swap&family=Inter%3Awght%40400%3B500%3B700%3B900&family=Noto+Sans%3Awght%40400%3B500%3B700%3B900"
    />
    <title>Cardápio - AlgExpress</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
</head>
<body>
<div class="relative flex size-full min-h-screen flex-col bg-slate-50 group/design-root overflow-x-hidden" style='font-family: Inter, "Noto Sans", sans-serif;'>
    <div class="layout-container flex h-full grow flex-col">
        <!-- Header -->
        <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#e7edf4] px-10 py-3">
            <div class="flex items-center gap-4 text-[#0d141c]">
                <div class="size-4">
                    <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M24 4H42V17.3333V30.6667H24V44H6V30.6667V17.3333H24V4Z" fill="currentColor"></path>
                    </svg>
                </div>
                <h2 class="text-[#0d141c] text-lg font-bold leading-tight tracking-[-0.015em]">AlgExpress</h2>
            </div>
            <div class="flex flex-1 justify-end gap-8">
                <div class="flex items-center gap-9">
                    <a class="text-[#0d141c] text-sm font-medium leading-normal" href="/dashboard">Dashboard</a>
                    <a class="text-[#0d141c] text-sm font-medium leading-normal" href="/orders">Pedidos</a>
                    <a class="text-[#0d141c] text-sm font-medium leading-normal" href="/customers">Clientes</a>
                    <a class="text-[#0d80f2] text-sm font-medium leading-normal" href="/menu">Cardápio</a>
                    <a class="text-[#0d141c] text-sm font-medium leading-normal" href="/deliveries">Entregas</a>
                </div>
                <div
                    class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10"
                    style='background-image: url("https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face");'
                ></div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="px-40 flex flex-1 justify-center py-5">
            <div class="layout-content-container flex flex-col max-w-[1200px] flex-1">
                
                <!-- Page Header -->
                <div class="flex flex-wrap justify-between gap-3 p-4">
                    <div class="flex min-w-72 flex-col gap-3">
                        <p class="text-[#0d141c] tracking-light text-[32px] font-bold leading-tight">Cardápio</p>
                        <p class="text-[#49739c] text-sm font-normal leading-normal">Gerencie pizzas, ingredientes e preços do seu cardápio</p>
                    </div>
                    <div class="flex gap-2">
                        <button
                            class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#e7edf4] text-[#0d141c] text-sm font-bold leading-normal tracking-[0.015em]"
                            onclick="openIngredientsModal()"
                        >
                            <span class="truncate">Ingredientes</span>
                        </button>
                        <button
                            class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#0d80f2] text-slate-50 text-sm font-bold leading-normal tracking-[0.015em]"
                            onclick="openCreatePizzaModal()"
                        >
                            <span class="truncate">Nova Pizza</span>
                        </button>
                    </div>
                </div>

                <!-- Filters Section -->
                <div class="flex gap-3 p-3 flex-wrap items-center">
                    <!-- Category Filters -->
                    <div class="flex gap-2">
                        <div class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-[#0d80f2] text-white pl-4 pr-4 cursor-pointer" onclick="filterByCategory('ALL')">
                            <p class="text-sm font-medium leading-normal">Todas</p>
                        </div>
                        <div class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-[#e7edf4] pl-4 pr-4 cursor-pointer" onclick="filterByCategory('TRADITIONAL')">
                            <p class="text-[#0d141c] text-sm font-medium leading-normal">Tradicionais</p>
                        </div>
                        <div class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-[#e7edf4] pl-4 pr-4 cursor-pointer" onclick="filterByCategory('GOURMET')">
                            <p class="text-[#0d141c] text-sm font-medium leading-normal">Gourmet</p>
                        </div>
                        <div class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-[#e7edf4] pl-4 pr-4 cursor-pointer" onclick="filterByCategory('SWEET')">
                            <p class="text-[#0d141c] text-sm font-medium leading-normal">Doces</p>
                        </div>
                        <div class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-[#e7edf4] pl-4 pr-4 cursor-pointer" onclick="showVegetarianOnly()">
                            <p class="text-[#0d141c] text-sm font-medium leading-normal">Vegetarianas</p>
                        </div>
                    </div>

                    <!-- Search Bar -->
                    <div class="flex-1 max-w-[400px]">
                        <div class="flex w-full flex-1 items-stretch rounded-lg h-8">
                            <div class="text-[#49739c] flex border-none bg-[#e7edf4] items-center justify-center pl-3 rounded-l-lg border-r-0">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="currentColor" viewBox="0 0 256 256">
                                    <path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"></path>
                                </svg>
                            </div>
                            <input
                                placeholder="Buscar pizzas..."
                                class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#0d141c] focus:outline-0 focus:ring-0 border-none bg-[#e7edf4] focus:border-none h-full placeholder:text-[#49739c] px-3 rounded-l-none border-l-0 pl-2 text-sm font-normal leading-normal"
                                id="searchInput"
                                onkeyup="searchPizzas()"
                            />
                        </div>
                    </div>
                </div>

                <!-- Stats Cards -->
                <div class="flex gap-4 p-4">
                    <div class="flex min-w-[180px] flex-1 flex-col gap-2 rounded-lg p-4 bg-[#e7edf4]">
                        <p class="text-[#0d141c] text-sm font-medium leading-normal">Total de Pizzas</p>
                        <p class="text-[#0d141c] tracking-light text-xl font-bold leading-tight" id="totalPizzas">28</p>
                    </div>
                    <div class="flex min-w-[180px] flex-1 flex-col gap-2 rounded-lg p-4 bg-[#e7edf4]">
                        <p class="text-[#0d141c] text-sm font-medium leading-normal">Pizzas Disponíveis</p>
                        <p class="text-[#0d141c] tracking-light text-xl font-bold leading-tight" id="availablePizzas">25</p>
                    </div>
                    <div class="flex min-w-[180px] flex-1 flex-col gap-2 rounded-lg p-4 bg-[#e7edf4]">
                        <p class="text-[#0d141c] text-sm font-medium leading-normal">Ingredientes</p>
                        <p class="text-[#0d141c] tracking-light text-xl font-bold leading-tight" id="totalIngredients">45</p>
                    </div>
                    <div class="flex min-w-[180px] flex-1 flex-col gap-2 rounded-lg p-4 bg-[#e7edf4]">
                        <p class="text-[#0d141c] text-sm font-medium leading-normal">Mais Popular</p>
                        <p class="text-[#0d141c] tracking-light text-xl font-bold leading-tight" id="mostPopular">Margherita</p>
                    </div>
                </div>

                <!-- Pizzas Grid -->
                <div class="px-4 py-3">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="pizzasGrid">
                        
                        <!-- Pizza Card 1 -->
                        <div class="flex flex-col bg-white rounded-lg border border-[#cedbe8] overflow-hidden hover:shadow-lg transition-shadow">
                            <div class="relative">
                                <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=300&h=200&fit=crop" alt="Margherita" class="w-full h-48 object-cover">
                                <div class="absolute top-2 right-2">
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-medium">DISPONÍVEL</span>
                                </div>
                                <div class="absolute top-2 left-2">
                                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium">TRADICIONAL</span>
                                </div>
                            </div>
                            <div class="p-4 flex-1 flex flex-col">
                                <h3 class="text-lg font-bold text-[#0d141c] mb-2">Pizza Margherita</h3>
                                <p class="text-sm text-[#49739c] mb-3 flex-1">Molho de tomate, mozzarella, manjericão fresco e azeite</p>
                                
                                <!-- Prices -->
                                <div class="grid grid-cols-2 gap-2 text-sm mb-3">
                                    <div class="text-center">
                                        <span class="text-[#49739c]">P:</span> <span class="font-bold text-[#0d141c]">R$ 25,90</span>
                                    </div>
                                    <div class="text-center">
                                        <span class="text-[#49739c]">M:</span> <span class="font-bold text-[#0d141c]">R$ 35,90</span>
                                    </div>
                                    <div class="text-center">
                                        <span class="text-[#49739c]">G:</span> <span class="font-bold text-[#0d141c]">R$ 45,90</span>
                                    </div>
                                    <div class="text-center">
                                        <span class="text-[#49739c]">GG:</span> <span class="font-bold text-[#0d141c]">R$ 55,90</span>
                                    </div>
                                </div>

                                <!-- Actions -->
                                <div class="flex gap-2">
                                    <button class="flex-1 bg-[#0d80f2] text-white px-3 py-2 rounded text-sm font-medium hover:bg-blue-600" onclick="editPizza(1)">
                                        Editar
                                    </button>
                                    <button class="bg-[#e7edf4] text-[#0d141c] px-3 py-2 rounded text-sm font-medium hover:bg-gray-200" onclick="togglePizzaAvailability(1, false)">
                                        Desativar
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Pizza Card 2 -->
                        <div class="flex flex-col bg-white rounded-lg border border-[#cedbe8] overflow-hidden hover:shadow-lg transition-shadow">
                            <div class="relative">
                                <img src="https://images.unsplash.com/photo-1513104890138-7c749659a591?w=300&h=200&fit=crop" alt="Pepperoni" class="w-full h-48 object-cover">
                                <div class="absolute top-2 right-2">
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-medium">DISPONÍVEL</span>
                                </div>
                                <div class="absolute top-2 left-2">
                                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium">TRADICIONAL</span>
                                </div>
                            </div>
                            <div class="p-4 flex-1 flex flex-col">
                                <h3 class="text-lg font-bold text-[#0d141c] mb-2">Pizza Pepperoni</h3>
                                <p class="text-sm text-[#49739c] mb-3 flex-1">Molho de tomate, mozzarella e pepperoni</p>
                                
                                <!-- Prices -->
                                <div class="grid grid-cols-2 gap-2 text-sm mb-3">
                                    <div class="text-center">
                                        <span class="text-[#49739c]">P:</span> <span class="font-bold text-[#0d141c]">R$ 28,90</span>
                                    </div>
                                    <div class="text-center">
                                        <span class="text-[#49739c]">M:</span> <span class="font-bold text-[#0d141c]">R$ 38,90</span>
                                    </div>
                                    <div class="text-center">
                                        <span class="text-[#49739c]">G:</span> <span class="font-bold text-[#0d141c]">R$ 48,90</span>
                                    </div>
                                    <div class="text-center">
                                        <span class="text-[#49739c]">GG:</span> <span class="font-bold text-[#0d141c]">R$ 58,90</span>
                                    </div>
                                </div>

                                <!-- Actions -->
                                <div class="flex gap-2">
                                    <button class="flex-1 bg-[#0d80f2] text-white px-3 py-2 rounded text-sm font-medium hover:bg-blue-600" onclick="editPizza(2)">
                                        Editar
                                    </button>
                                    <button class="bg-[#e7edf4] text-[#0d141c] px-3 py-2 rounded text-sm font-medium hover:bg-gray-200" onclick="togglePizzaAvailability(2, false)">
                                        Desativar
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Pizza Card 3 (Unavailable) -->
                        <div class="flex flex-col bg-white rounded-lg border border-[#cedbe8] overflow-hidden hover:shadow-lg transition-shadow opacity-60">
                            <div class="relative">
                                <img src="https://images.unsplash.com/photo-1574071318508-1cdbab80d002?w=300&h=200&fit=crop" alt="Quattro Formaggi" class="w-full h-48 object-cover">
                                <div class="absolute top-2 right-2">
                                    <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-xs font-medium">INDISPONÍVEL</span>
                                </div>
                                <div class="absolute top-2 left-2">
                                    <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs font-medium">GOURMET</span>
                                </div>
                            </div>
                            <div class="p-4 flex-1 flex flex-col">
                                <h3 class="text-lg font-bold text-[#0d141c] mb-2">Pizza Quattro Formaggi</h3>
                                <p class="text-sm text-[#49739c] mb-3 flex-1">Molho branco, mozzarella, gorgonzola, parmesão e provolone</p>
                                
                                <!-- Prices -->
                                <div class="grid grid-cols-2 gap-2 text-sm mb-3">
                                    <div class="text-center">
                                        <span class="text-[#49739c]">P:</span> <span class="font-bold text-[#0d141c]">R$ 32,90</span>
                                    </div>
                                    <div class="text-center">
                                        <span class="text-[#49739c]">M:</span> <span class="font-bold text-[#0d141c]">R$ 42,90</span>
                                    </div>
                                    <div class="text-center">
                                        <span class="text-[#49739c]">G:</span> <span class="font-bold text-[#0d141c]">R$ 52,90</span>
                                    </div>
                                    <div class="text-center">
                                        <span class="text-[#49739c]">GG:</span> <span class="font-bold text-[#0d141c]">R$ 62,90</span>
                                    </div>
                                </div>

                                <!-- Actions -->
                                <div class="flex gap-2">
                                    <button class="flex-1 bg-[#0d80f2] text-white px-3 py-2 rounded text-sm font-medium hover:bg-blue-600" onclick="editPizza(3)">
                                        Editar
                                    </button>
                                    <button class="bg-green-500 text-white px-3 py-2 rounded text-sm font-medium hover:bg-green-600" onclick="togglePizzaAvailability(3, true)">
                                        Ativar
                                    </button>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- Pagination -->
                <div class="flex justify-between items-center px-4 py-3">
                    <p class="text-[#49739c] text-sm font-normal leading-normal">Mostrando 1-3 de 28 pizzas</p>
                    <div class="flex gap-2">
                        <button class="flex h-8 w-8 items-center justify-center rounded-lg bg-[#e7edf4] text-[#0d141c]">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256">
                                <path d="M165.66,202.34a8,8,0,0,1-11.32,11.32l-80-80a8,8,0,0,1,0-11.32l80-80a8,8,0,0,1,11.32,11.32L91.31,128Z"></path>
                            </svg>
                        </button>
                        <button class="flex h-8 w-8 items-center justify-center rounded-lg bg-[#0d80f2] text-white">1</button>
                        <button class="flex h-8 w-8 items-center justify-center rounded-lg bg-[#e7edf4] text-[#0d141c]">2</button>
                        <button class="flex h-8 w-8 items-center justify-center rounded-lg bg-[#e7edf4] text-[#0d141c]">3</button>
                        <button class="flex h-8 w-8 items-center justify-center rounded-lg bg-[#e7edf4] text-[#0d141c]">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256">
                                <path d="M90.34,53.66a8,8,0,0,1,11.32-11.32l80,80a8,8,0,0,1,0,11.32l-80,80a8,8,0,0,1-11.32-11.32L164.69,128Z"></path>
                            </svg>
                        </button>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<script>
// Simulate API calls
const API_BASE = 'http://localhost:8080/api/v1';

function filterByCategory(category) {
    // Update active filter button
    document.querySelectorAll('.flex.h-8').forEach(btn => {
        if (btn.querySelector('p')) {
            btn.classList.remove('bg-[#0d80f2]', 'text-white');
            btn.classList.add('bg-[#e7edf4]');
            btn.querySelector('p').classList.remove('text-white');
            btn.querySelector('p').classList.add('text-[#0d141c]');
        }
    });
    
    event.target.closest('.flex.h-8').classList.remove('bg-[#e7edf4]');
    event.target.closest('.flex.h-8').classList.add('bg-[#0d80f2]', 'text-white');
    event.target.closest('.flex.h-8').querySelector('p').classList.remove('text-[#0d141c]');
    event.target.closest('.flex.h-8').querySelector('p').classList.add('text-white');

    // API Call: GET /api/v1/cardapio/pizzas/category/{category} or GET /api/v1/cardapio/pizzas
    const endpoint = category === 'ALL' ? `${API_BASE}/cardapio/pizzas` : `${API_BASE}/cardapio/pizzas/category/${category}`;
    console.log(`Filtering pizzas by category: ${category}`);
    console.log(`API Call: GET ${endpoint}`);
}

function showVegetarianOnly() {
    // API Call: GET /api/v1/cardapio/pizzas/vegetarian
    console.log(`Showing vegetarian pizzas only`);
    console.log(`API Call: GET ${API_BASE}/cardapio/pizzas/vegetarian`);
}

function searchPizzas() {
    const searchTerm = document.getElementById('searchInput').value;
    // API Call: GET /api/v1/cardapio/pizzas/search?name={searchTerm}
    console.log(`Searching pizzas: ${searchTerm}`);
    console.log(`API Call: GET ${API_BASE}/cardapio/pizzas/search?name=${encodeURIComponent(searchTerm)}`);
}

function editPizza(pizzaId) {
    // API Call: GET /api/v1/cardapio/pizzas/{id} to load details, then PUT /api/v1/cardapio/pizzas/{id} to update
    console.log(`Editing pizza ${pizzaId}`);
    console.log(`API Call: GET ${API_BASE}/cardapio/pizzas/${pizzaId}`);
    
    window.open(`edit_pizza.html?id=${pizzaId}`, '_blank');
}

function togglePizzaAvailability(pizzaId, isAvailable) {
    // API Call: PATCH /api/v1/cardapio/pizzas/{id}/availability?isAvailable={isAvailable}
    console.log(`Toggling pizza ${pizzaId} availability to ${isAvailable}`);
    console.log(`API Call: PATCH ${API_BASE}/cardapio/pizzas/${pizzaId}/availability?isAvailable=${isAvailable}`);
    
    const action = isAvailable ? 'ativada' : 'desativada';
    alert(`Pizza ${action} com sucesso!`);
    loadPizzas();
}

function openCreatePizzaModal() {
    window.open('create_pizza.html', '_blank');
}

function openIngredientsModal() {
    // API Call: GET /api/v1/cardapio/ingredientes
    console.log(`Opening ingredients management`);
    console.log(`API Call: GET ${API_BASE}/cardapio/ingredientes`);
    
    window.open('ingredients_management.html', '_blank');
}

function loadPizzas() {
    // API Call: GET /api/v1/cardapio/pizzas (returns PizzaSummaryDTO[])
    console.log(`Loading pizzas`);
    console.log(`API Call: GET ${API_BASE}/cardapio/pizzas`);
    
    // Load statistics
    loadMenuStatistics();
}

function loadMenuStatistics() {
    // API Calls for statistics
    console.log(`API Call: GET ${API_BASE}/cardapio/statistics/pizzas-count`);
    console.log(`API Call: GET ${API_BASE}/cardapio/statistics/ingredients-count`);
    console.log(`API Call: GET ${API_BASE}/cardapio/pizzas/popular`);
}

// Load pizzas on page load
window.onload = function() {
    loadPizzas();
};
</script>

</body>
</html>